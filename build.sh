#!/bin/bash

# –ì–∏–±—Ä–∏–¥–Ω—ã–π –±–∏–ª–¥: Astro –¥–ª—è –ª–µ–Ω–¥–∏–Ω–≥–∞ –∏ —É—Å–ª—É–≥, Hugo –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

set -e

echo "üöÄ –ù–∞—á–∏–Ω–∞–µ–º –≥–∏–±—Ä–∏–¥–Ω—ã–π –±–∏–ª–¥..."

# 1. –ë–∏–ª–¥–∏–º Hugo (–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è) - —Å–Ω–∞—á–∞–ª–∞, —á—Ç–æ–±—ã Astro –º–æ–≥ –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞—Ç—å –Ω—É–∂–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
echo "üìö –ë–∏–ª–¥–∏–º Hugo (–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)..."
hugo --gc --minify

# 2. –ë–∏–ª–¥–∏–º Astro (–ª–µ–Ω–¥–∏–Ω–≥ –∏ —É—Å–ª—É–≥–∏)
echo "üì¶ –ë–∏–ª–¥–∏–º Astro (–ª–µ–Ω–¥–∏–Ω–≥ –∏ —É—Å–ª—É–≥–∏)..."
npm run build

# 3. –ö–æ–ø–∏—Ä—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã Astro –≤ public Hugo (–ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞—è –≥–ª–∞–≤–Ω—É—é –∏ —É—Å–ª—É–≥–∏)
echo "üîÄ –û–±—ä–µ–¥–∏–Ω—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã..."
cp -r astro-dist/* public/

# 4. –£–¥–∞–ª—è–µ–º –≤—Ä–µ–º–µ–Ω–Ω—É—é –ø–∞–ø–∫—É Astro
rm -rf astro-dist

echo "‚úÖ –ë–∏–ª–¥ –∑–∞–≤–µ—Ä—à—ë–Ω! –†–µ–∑—É–ª—å—Ç–∞—Ç –≤ –ø–∞–ø–∫–µ public/"

